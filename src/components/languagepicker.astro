---
// Astro標準のi18nヘルパーをインポート
import { getRelativeLocaleUrl } from 'astro:i18n';

// 現在のページのパス（例: /about や /en/about）を取得
const { pathname } = Astro.url;

// パスから現在の言語を除去して、純粋なページパスを取り出す
// 例: /en/about -> /about
const currentPath = pathname.replace(/^\/(en|jp)/, '');

// 日本語版と英語版それぞれのURLを生成
const jpUrl = getRelativeLocaleUrl('jp', currentPath);
const enUrl = getRelativeLocaleUrl('en', currentPath);
---

<div class="lang-picker">
  <a href={jpUrl} class={Astro.currentLocale === 'jp' ? 'active' : ''}>JP</a>
  <span>|</span>
  <a href={enUrl} class={Astro.currentLocale === 'en' ? 'active' : ''}>EN</a>
</div>

<style>
  .lang-picker a { text-decoration: none; color: gray; }
  .lang-picker a.active { font-weight: bold; color: black; pointer-events: none; }
</style>
